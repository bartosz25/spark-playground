# Output modes

## Append and Update
1. Explain the [AppendModeForAggregatesDemo.scala](src%2Fmain%2Fscala%2Fcom%2Fwaitingforcode%2FAppendModeForAggregatesDemo.scala) and
[UpdateModeForAggregatesDemo.scala](src%2Fmain%2Fscala%2Fcom%2Fwaitingforcode%2FUpdateModeForAggregatesDemo.scala)
* both jobs have the same logic that counts number of elements in a 10-minutes window
* the single difference is the output mode that for the append will generate the output only once,
  when the watermark passes by, while for the update, the generation will be continuous on each update

2. Run `AppendModeForAggregatesDemo`. You should see:

```
-------------------------------------------
Batch: 0
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+

-------------------------------------------
Batch: 1
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+

-------------------------------------------
Batch: 2
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+

-------------------------------------------
Batch: 3
-------------------------------------------
+------------------------------------------+-----+
|window                                    |count|
+------------------------------------------+-----+
|{2024-04-01 09:00:00, 2024-04-01 09:10:00}|4    |
|{2024-04-01 09:10:00, 2024-04-01 09:20:00}|1    |
+------------------------------------------+-----+

-------------------------------------------
Batch: 4
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+
```

3. Run `UpdateModeForAggregatesDemo`. You should see:

```
-------------------------------------------
Batch: 0
-------------------------------------------
+------------------------------------------+-----+
|window                                    |count|
+------------------------------------------+-----+
|{2024-04-01 09:00:00, 2024-04-01 09:10:00}|3    |
|{2024-04-01 09:10:00, 2024-04-01 09:20:00}|1    |
+------------------------------------------+-----+

-------------------------------------------
Batch: 1
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+

-------------------------------------------
Batch: 2
-------------------------------------------
+------------------------------------------+-----+
|window                                    |count|
+------------------------------------------+-----+
|{2024-04-01 09:00:00, 2024-04-01 09:10:00}|4    |
|{2024-04-01 10:00:00, 2024-04-01 10:10:00}|1    |
+------------------------------------------+-----+

-------------------------------------------
Batch: 3
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+

-------------------------------------------
Batch: 4
-------------------------------------------
+------+-----+
|window|count|
+------+-----+
+------+-----+
```

4. Explain [CompleteModeForAggregatesDemo.scala](src%2Fmain%2Fscala%2Fcom%2Fwaitingforcode%2FCompleteModeForAggregatesDemo.scala)
* the job return all stores results each time, even if they don't get any update

5. Run `CompleteModeForAggregatesDemo`
```
-------------------------------------------
Batch: 0
-------------------------------------------
+-------+-----+
|eventId|count|
+-------+-----+
|2      |1    |
|1      |3    |
+-------+-----+

-------------------------------------------
Batch: 1
-------------------------------------------
+-------+-----+
|eventId|count|
+-------+-----+
|2      |2    |
|1      |4    |
+-------+-----+

-------------------------------------------
Batch: 2
-------------------------------------------
+-------+-----+
|eventId|count|
+-------+-----+
|2      |2    |
|1      |5    |
+-------+-----+
```